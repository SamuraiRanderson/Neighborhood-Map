var Model=[{name:"Jimmy's Food Store",address_1:"4901 Bryan St",address_2:"Dallas, TX 75206",phone:"(214) 823-6180",lat:32.804476,lng:-96.773658,url:"https://www.jimmysfoodstore.com",locationId:122958},{name:"Dolly Python",address_1:"1916 N Haskell Ave",address_2:"Dallas, TX 75204",phone:"(214) 887-3434",lat:32.802272,lng:-96.785943,url:"http://www.dollypythonvintage.com",locationId:567284},{name:"The Samurai Collection",address_1:"2501 N Harwood St",address_2:"Dallas, TX 75201",phone:"(214) 965-1032",lat:32.791917,lng:-96.806217,url:"http://www.samuraicollection.org",locationId:91523867},{name:"Pecan Lodge",address_1:"2702 Main St",address_2:"Dallas, TX 75226",phone:"(214) 748-8900",lat:32.783925,lng:-96.78382,url:"http://www.pecanlodge.com",locationId:289297740},{name:"Smoke",address_1:"901 Fort Worth Ave",address_2:"Dallas, TX 75208",phone:"(214) 393-4141",lat:32.769605,lng:-96.837312,url:"http://smokerestaurant.com",locationId:152607},{name:"Dallas Museum of Art",address_1:"1717 N Harwood St",address_2:"Dallas, TX 75201",phone:"(214) 922-1200",lat:32.787814,lng:-96.800793,url:"https://www.dma.org",locationId:294352157},{name:"Luscher's Red Hots",address_1:"2653 Commerce St",address_2:"Dallas, TX 75226",phone:"(214) 434-1006",lat:32.783485,lng:-96.784181,url:"http://www.luschers.com",locationId:627073515},{name:"Oddfellows",address_1:"316 W 7th St",address_2:"Dallas, TX 75208",phone:"(214) 944-5958",lat:32.748872,lng:-96.826812,url:"http://oddfellowsdallas.com",locationId:526179323},{name:"We are 1976",address_1:"313 N Bishop Ave",address_2:"Dallas, TX 75208",phone:"(214) 821-1976",lat:32.748334,lng:-96.829321,url:"http://www.weare1976.com",locationId:684487},{name:"The Cedars Social",address_1:"1326 S Lamar",address_2:"Dallas, TX 75215",phone:"(214) 928-7700",lat:32.769119,lng:-96.795821,url:"http://www.thecedarssocial.com",locationId:236668314}],ViewModel=function(){function a(){for(var a="https://api.instagram.com/v1/locations/",e="/media/recent?access_token=1962684669.6f4a010.676642d0021149d7b7d58a8cec924c0d",o=[],l=0;l<Model.length;l++)o.push(a+Model[l].locationId+e);var n=setTimeout(function(){$("imgData").text("Instagram information is not available at this time... Please try again later.")},3e3);return $.each(o,function(a,e){$.ajax(e,{type:"Get",dataType:"jsonp",cache:!1,jasonp:"callback",asynch:!1,success:function(e){t.markerList()[a].pic=e.data[a].images.low_resolution.url,clearTimeout(n)}})}),!1}function e(a){r.setContent("<h2>"+a.title+"</h2>"+a.address_1+"<br>"+a.address_2+"<br>"+a.phone+"</br><a href="+a.url+">"+a.url+"</a><br><img src="+a.pic+"></br>"),r.open(map,a),a.setAnimation(null!==a.getAnimation()?null:google.maps.Animation.BOUNCE),map.panTo(a.position)}function o(a){setTimeout(function(){a.setAnimation(null)},3500)}var t=this;t.markerList=ko.observableArray([]),$(a);for(var l,n=new google.maps.MarkerImage("images/pegasus.png",null,null,null,new google.maps.Size(42,42)),s=0;s<Model.length;s++){l=new google.maps.Marker({position:new google.maps.LatLng(Model[s].lat,Model[s].lng),map:map,icon:n,title:Model[s].name,address_1:Model[s].address_1,address_2:Model[s].address_2,phone:Model[s].phone,pic:Model[s].pic,url:Model[s].url,locationId:"https://api.instagram.com/v1/locations/"+Model[s].locationId+"/media/recent?access_token=1962684669.6f4a010.676642d0021149d7b7d58a8cec924c0d",animation:google.maps.Animation.DROP}),t.markerList.push(l);var r=new google.maps.InfoWindow;t.filter=function(){var a=$("#filter").val();a=a.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()}),$(".locList > li").each(function(){$(this).text().search(a)>-1?$(this).show():$(this).hide()});for(var e=0;e<t.markerList().length;e++)t.markerList()[e].setMap(t.markerList()[e].title.search(a)>-1?map:null)},$("#uiList .locList").append("<li><a>"+Model[s].name+"<br>"+Model[s].address_1+"<br>"+Model[s].address_2+"<br>"+Model[s].phone+"<br><hr></a></li>"),$("#uiList .locList li a").last().bind("click",function(a){return function(){e(a),o(a)}}(l)),google.maps.event.addListener(l,"click",function(){e(this),o(this)})}},map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(32.789356,-96.801788),zoom:13});$(document).ready(function(){ko.applyBindings(new ViewModel)});