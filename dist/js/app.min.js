var Model=[{name:"Jimmy's Food Store",address_1:"4901 Bryan St",address_2:"Dallas, TX 75206",phone:"(214) 823-6180",lat:32.804476,lng:-96.773658,url:"https://www.jimmysfoodstore.com",locationId:122958},{name:"Dolly Python",address_1:"1916 N Haskell Ave",address_2:"Dallas, TX 75204",phone:"(214) 887-3434",lat:32.802272,lng:-96.785943,url:"http://www.dollypythonvintage.com",locationId:567284},{name:"The Samurai Collection",address_1:"2501 N Harwood St",address_2:"Dallas, TX 75201",phone:"(214) 965-1032",lat:32.791917,lng:-96.806217,url:"http://www.samuraicollection.org",locationId:91523867},{name:"Pecan Lodge",address_1:"2702 Main St",address_2:"Dallas, TX 75226",phone:"(214) 748-8900",lat:32.783925,lng:-96.78382,url:"http://www.pecanlodge.com",locationId:289297740},{name:"Smoke",address_1:"901 Fort Worth Ave",address_2:"Dallas, TX 75208",phone:"(214) 393-4141",lat:32.769605,lng:-96.837312,url:"http://smokerestaurant.com",locationId:152607},{name:"Dallas Museum of Art",address_1:"1717 N Harwood St",address_2:"Dallas, TX 75201",phone:"(214) 922-1200",lat:32.787814,lng:-96.800793,url:"https://www.dma.org",locationId:294352157},{name:"Luscher's Red Hots",address_1:"2653 Commerce St",address_2:"Dallas, TX 75226",phone:"(214) 434-1006",lat:32.783485,lng:-96.784181,url:"http://www.luschers.com",locationId:627073515},{name:"Oddfellows",address_1:"316 W 7th St",address_2:"Dallas, TX 75208",phone:"(214) 944-5958",lat:32.748872,lng:-96.826812,url:"http://oddfellowsdallas.com",locationId:526179323},{name:"We are 1976",address_1:"313 N Bishop Ave",address_2:"Dallas, TX 75208",phone:"(214) 821-1976",lat:32.748334,lng:-96.829321,url:"http://www.weare1976.com",locationId:684487},{name:"The Cedars Social",address_1:"1326 S Lamar",address_2:"Dallas, TX 75215",phone:"(214) 928-7700",lat:32.769119,lng:-96.795821,url:"http://www.thecedarssocial.com",locationId:236668314},{name:"Elbow Room",address_1:"3010 Gaston Ave",address_2:"Dallas, TX 75226",phone:"(214) 828-9488",lat:32.78859,lng:-96.783126,url:"http://elbowroomdallas.com",locationId:671396451}],ViewModel=function(){function a(){for(var a="https://api.instagram.com/v1/locations/",e="/media/recent?access_token=1962684669.6f4a010.676642d0021149d7b7d58a8cec924c0d",o=[],n=0;n<Model.length;n++)o.push(a+Model[n].locationId+e);var t=setTimeout(function(){s.text("Instagram information is not available at this time... Please try again later.")},3e3),s=$("body");return $.each(o,function(a,e){$.ajax(e,{type:"Get",dataType:"jsonp",cache:!1,jasonp:"callback",asynch:!0,success:function(e){l.markerList()[a].pic=e.data[a].images.low_resolution.url,clearTimeout(t)}})}),!1}function e(a){d.setContent("<h1>"+a.title+"</h1><h2>"+a.address_1+"<br>"+a.address_2+"<br>"+a.phone+"<br><br><a href="+a.url+">"+a.url+"</a></h2><br><img src="+a.pic+" height=150px width=150px></br>"),d.open(map,a),a.setAnimation(null!==a.getAnimation()?null:google.maps.Animation.BOUNCE),map.panTo(a.position)}function o(a){setTimeout(function(){a.setAnimation(null)},3500)}var l=this;l.markerList=ko.observableArray([]),$(a);for(var n,t=new google.maps.MarkerImage("images/pegasus.png",null,null,null,new google.maps.Size(42,42)),s=0;s<Model.length;s++){n=new google.maps.Marker({position:new google.maps.LatLng(Model[s].lat,Model[s].lng),map:map,icon:t,title:Model[s].name,address_1:Model[s].address_1,address_2:Model[s].address_2,phone:Model[s].phone,url:Model[s].url,animation:google.maps.Animation.DROP}),l.markerList.push(n);var d=new google.maps.InfoWindow({maxWidth:250});google.maps.event.addListener(d,"domready",function(){$("#div-main-infoWindow").closest(".gm-style-iw").parent().addClass("custom-iw")}),google.maps.event.addListener(n,"click",function(){e(this),o(this)}),l.filter=function(){var a=$("#filter").val();a=a.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()}),$(".dropdown-menu > li").each(function(){$(this).text().search(a)>-1?$(this).show():$(this).hide()});for(var e=0;e<l.markerList().length;e++)l.markerList()[e].setMap(l.markerList()[e].title.search(a)>-1?map:null)},$("#uiList .dropdown-menu").append("<li><a>"+Model[s].name+"<br>"+Model[s].address_1+"<br>"+Model[s].address_2+"<br>"+Model[s].phone+"<br><hr></a></li>"),$("#uiList .dropdown-menu li a").last().bind("click",function(a){return function(){e(a),o(a)}}(n))}$("#uiList").click(function(){$(".dropdown-menu").toggle().addClass("slideDown")})},map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(32.789356,-96.801788),zoom:13,disableDefaultUI:!0});$(document).ready(function(){ko.applyBindings(new ViewModel)});